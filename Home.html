<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            direction: rtl;
        }
        .date-time {
            font-size: 2em;
            color: royalblue;
            margin-top: 20px;
        }
        .weekday {
            font-size: 2em;
            margin-top: 10px;
            color: mediumseagreen;
        }
        .hijri-date {
            font-size: 1.2em;
            margin-top: 10px;
            color: purple;
        }
        .gregorian-date {
            font-size: 1.2em;
            margin-top: 10px;
            color: darkorange;
        }
        .outage-time {
            font-size: 2em;
            color: crimson;
            margin-top: 20px;
        }
        .image-container {
            margin-top: 30px;
        }
        .settings-container {
            display: none;
            position: absolute;
            top: 60px;
            left: 20px;
            background-color: #f0f0f0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 200px;
            text-align: left;
        }
        .settings-container label, .settings-container input {
            font-size: 1em;
            margin: 5px;
        }
        .settings-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: blue;
            color: white;
            padding: 10px 10px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
        }
        .linkedin-icon {
            position: absolute;
            top: 20px;
            right: 20px;
        }
        .linkedin-icon img {
            width: 30px;
            height: 30px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <!-- نمایش تاریخ و ساعت -->
    <div class="date-time" id="date-time"></div>
    <div class="weekday" id="weekday"></div>
    <div class="hijri-date" id="hijri-date"></div>
    <div class="gregorian-date" id="gregorian-date"></div>
    <div class="outage-time" id="outage-time"></div>

    <div class="image-container">
        <img src="https://up.20script.ir/file/23a7-power1-outage1-cartoon3.jpg" alt="Power Outage Image" width="300">
    </div>

    <div class="linkedin-icon">
        <a href="https://www.linkedin.com/in/saber-s-afshar/" target="_blank">
            <img src="https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png" alt="LinkedIn">
        </a>
    </div>

    <button class="settings-button" onclick="toggleSettings()">تنظیمات پلن خاموشی</button>

    <div class="settings-container" id="settings-container">
        <label for="outage-duration">بازه خاموشی (ساعت):</label>
        <input type="number" id="outage-duration" min="1" max="24" value="1" step="1">

        <div>
            <p>انتخاب طرح:</p>
            <div>
                <label><input type="radio" name="schedule" value="1"> طرح 1 (9 تا 17)</label>
            </div>
            <div>
                <label><input type="radio" name="schedule" value="2"> طرح 2 (9 تا 19)</label>
            </div>
            <div>
                <label><input type="radio" name="schedule" value="3"> طرح 3 (9 تا 21)</label>
            </div>
            <div>
                <label><input type="radio" name="schedule" value="4"> طرح 4 (10 تا 18)</label>
            </div>
            <div>
                <label><input type="radio" name="schedule" value="5"> طرح 5 (10 تا 20)</label>
            </div>
            <div>
                <label><input type="radio" name="schedule" value="6"> طرح 6 (10 تا 22)</label>
            </div>
            <div>
                <label><input type="radio" name="schedule" value="7"> طرح 7 (11 تا 19)</label>
            </div>
            <div>
                <label><input type="radio" name="schedule" value="8"> طرح 8 (11 تا 21)</label>
            </div>
            <div>
                <label><input type="radio" name="schedule" value="9"> طرح 9 (11 تا 23)</label>
            </div>
        </div>

        <div>
            <p>انتخاب پلن:</p>
            <div>
                <label><input type="radio" name="plan" value="1"> پلن 1</label>
                <label><input type="radio" name="plan" value="2"> پلن 2</label>
            </div>
            <div>
                <label><input type="radio" name="plan" value="3"> پلن 3</label>
                <label><input type="radio" name="plan" value="4"> پلن 4</label>
            </div>
            <div>
                <label><input type="radio" name="plan" value="5"> پلن 5</label>
                <label><input type="radio" name="plan" value="6"> پلن 6</label>
            </div>
            <div>
                <label><input type="radio" name="plan" value="7"> پلن 7</label>
                <label><input type="radio" name="plan" value="8"> پلن 8</label>
            </div>
            <div>
                <label><input type="radio" name="plan" value="9"> پلن 9</label>
            </div>
        </div>

        <button onclick="saveSettings()">تایید</button>
    </div>

    <script>
        // داده‌های ذخیره شده در localStorage
        let outageDuration = 1;
        let selectedPlan = 1;
        let schedule = 2;

        const STORAGE_KEY = 'homeSettings';

        function loadSettings() {
            const savedSettings = JSON.parse(localStorage.getItem(STORAGE_KEY));
            if (savedSettings) {
                outageDuration = savedSettings.outageDuration;
                selectedPlan = savedSettings.selectedPlan;
                schedule = savedSettings.schedule;
                document.getElementById("outage-duration").value = outageDuration;
                document.querySelector(`input[name="plan"][value="${selectedPlan}"]`).checked = true;
                document.querySelector(`input[name="schedule"][value="${schedule}"]`).checked = true;
            }
        }

        function saveSettings() {
            const settings = {
                outageDuration: parseInt(document.getElementById('outage-duration').value),
                selectedPlan: parseInt(document.querySelector('input[name="plan"]:checked').value),
                schedule: parseInt(document.querySelector('input[name="schedule"]:checked').value),
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));
            document.getElementById('settings-container').style.display = 'none';
            updateOutageTime();
        }

        function toggleSettings() {
            const settingsContainer = document.getElementById('settings-container');
            settingsContainer.style.display = settingsContainer.style.display === 'block' ? 'none' : 'block';
        }

        function getScheduleTimes(schedule) {
            switch (schedule) {
                case 1:
                    return { startHour: 9, endHour: 17 };
                case 2:
                    return { startHour: 9, endHour: 19 };
                case 3:
                    return { startHour: 9, endHour: 21 };
                case 4:
                    return { startHour: 10, endHour: 18 };
                case 5:
                    return { startHour: 10, endHour: 20 };
                case 6:
                    return { startHour: 10, endHour: 22 };
                case 7:
                    return { startHour: 11, endHour: 19 };
                case 8:
                    return { startHour: 11, endHour: 21 };
                case 9:
                    return { startHour: 11, endHour: 23 };
                default:
                    return { startHour: 9, endHour: 17 };
            }
        }

        function updateOutageTime() {
            const times = getScheduleTimes(schedule);
            const startHour = times.startHour;
            const endHour = times.endHour;

            const start = new Date();
            start.setHours(startHour, 0, 0);

            const end = new Date();
            end.setHours(endHour, 0, 0);

            const startFormatted = `${start.getHours().toString().padStart(2, '0')}:${start.getMinutes().toString().padStart(2, '0')}`;
            const endFormatted = `${end.getHours().toString().padStart(2, '0')}:${end.getMinutes().toString().padStart(2, '0')}`;

            document.getElementById('outage-time').textContent = `زمان خاموشی: ${startFormatted} تا ${endFormatted}`;
        }

        function updateDateTime() {
            const now = new Date();

            const dateTimeElement = document.getElementById('date-time');
            dateTimeElement.textContent = now.toLocaleTimeString('fa-IR');

            const weekdayElement = document.getElementById('weekday');
            const weekdays = ['یکشنبه', 'دوشنبه', 'سه‌شنبه', 'چهارشنبه', 'پنج‌شنبه', 'جمعه', 'شنبه'];
            weekdayElement.textContent = weekdays[now.getDay()];

            const hijriDateElement = document.getElementById('hijri-date');
            hijriDateElement.textContent = `تاریخ هجری: ${now.toLocaleDateString('fa-IR-u-ca-islamic')}`;

            const gregorianDateElement = document.getElementById('gregorian-date');
            gregorianDateElement.textContent = `تاریخ میلادی: ${now.toLocaleDateString('en-US')}`;
        }

        // بارگذاری تنظیمات ذخیره شده و به‌روزرسانی نمایش زمان خاموشی
        loadSettings();
        updateOutageTime();
        updateDateTime();

        // به‌روزرسانی ساعت هر ثانیه
        setInterval(updateDateTime, 1000);
    </script>

</body>
</html>
